<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PicVerse Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="../css/dashboard_style.css" />
</head>
<body>
  <header class="header">
    <a href="dashboard.html" class="logo">PicVerse</a>
    <nav class="navbar">
        <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="bi bi-list"></i>
      </button>
      <button class="SignOutBtn" onclick="window.location.href='../index.html'">Sign Out</button>
    </nav>
  </header>

<div class="sidebar-overlay" id="sidebarOverlay"></div>

<div class="dashboard-wrapper">
  <aside class="sidebar" id="sidebar">
    <ul>
    <li><a href="#" class="active"><i class="bi bi-house"></i> Home</a></li>
    <li><a href="#"><i class="bi bi-cloud-upload"></i> Upload</a></li>
    <li><a href="#"><i class="bi bi-image"></i> My Gallery</a></li>
    <li><a href="#"><i class="bi bi-gear"></i> Settings</a></li>
    <li><a href="change-password.html"><i class="bi bi-key"></i> Change Password</a></li>
  </ul>
  <button class="mobile-menu-signout" onclick="window.location.href='../index.html'">
    <i class="bi bi-box-arrow-right" style="margin-right: 8px;"></i>
    Sign Out
  </button>
  </aside>

  <div class="dashboard">
    <h1>Welcome back, <span class="username">PicVerse User</span>!</h1>
    
    <div class="stats">
      <div><strong>24</strong><br>Photos Uploaded</div>
      <div><strong>120</strong><br>Likes Received</div>
      <div><strong>45</strong><br>Followers</div>
    </div>

    <button class="btn upload-btn">Upload New Photo</button>

    <h2>Your Recent Uploads</h2>
    <div class="gallery">
      <div class="image-card"><img src="https://picsum.photos/200?1" alt="Upload 1" /></div>
      <div class="image-card"><img src="https://picsum.photos/200?2" alt="Upload 2" /></div>
      <div class="image-card"><img src="https://picsum.photos/200?3" alt="Upload 3" /></div>
      <div class="image-card"><img src="https://picsum.photos/200?4" alt="Upload 4" /></div>
    </div>
  </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      const mobileToggle = document.getElementById('mobileMenuToggle');
      const sidebar = document.getElementById('sidebar');
      const sidebarOverlay = document.getElementById('sidebarOverlay');
      let isMenuOpen = false;
      
      // Check if elements exist before adding event listeners
      if (mobileToggle && sidebar && sidebarOverlay) {
        
        // Toggle sidebar when mobile button is clicked
        mobileToggle.addEventListener('click', function(e) {
          e.preventDefault();
          toggleMenu();
        });
        
        // Close sidebar when overlay is clicked
        sidebarOverlay.addEventListener('click', function() {
          closeMenu();
        });
        
        // Close sidebar when clicking on sidebar links
        const sidebarLinks = sidebar.querySelectorAll('a');
        sidebarLinks.forEach(link => {
          link.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
              setTimeout(() => closeMenu(), 100);
            }
          });
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
          if (window.innerWidth > 768 && isMenuOpen) {
            closeMenu();
          }
        });
        
        // Handle escape key to close menu
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && isMenuOpen) {
            closeMenu();
          }
        });
        
        function toggleMenu() {
          if (!isMobile()) return;
          
          if (isMenuOpen) {
            closeMenu();
          } else {
            openMenu();
          }
        }
        
        function openMenu() {
          if (!isMobile()) return;
          
          isMenuOpen = true;
          sidebar.classList.add('active');
          sidebarOverlay.classList.add('active');
          mobileToggle.innerHTML = '<i class="bi bi-x"></i>';
          
          // Prevent body scroll when menu is open
          document.body.style.overflow = 'hidden';
        }
        
        function closeMenu() {
          isMenuOpen = false;
          sidebar.classList.remove('active');
          sidebarOverlay.classList.remove('active');
          mobileToggle.innerHTML = '<i class="bi bi-list"></i>';
          
          // Restore body scroll
          document.body.style.overflow = '';
        }
        
        function isMobile() {
          return window.innerWidth <= 768;
        }
        
      } else {
        console.warn('Mobile toggle button, sidebar, or overlay not found in HTML');
      }
    });

    // Handle orientation change
    window.addEventListener('orientationchange', function() {
      setTimeout(() => {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        const toggle = document.getElementById('mobileMenuToggle');
        
        if (sidebar && sidebar.classList.contains('active')) {
          sidebar.classList.remove('active');
          overlay.classList.remove('active');
          toggle.innerHTML = '<i class="bi bi-list"></i>';
          document.body.style.overflow = '';
        }
      }, 100);
    });
  </script>
</body>
</html>
